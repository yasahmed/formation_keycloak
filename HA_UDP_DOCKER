version: '3.8'
services:
  keycloak-container:
    image: quay.io/keycloak/keycloak:24.0.3
    ports:
      - "8080"
    volumes:
      - ./jdbc.xml:/opt/keycloak/conf/jdbc.xml
    environment:
      DB_VENDOR: POSTGRES
      DB_ADDR: postgres
      DB_DATABASE: keycloakdb
      DB_USER: keycloak
      DB_PASSWORD: password
      KC_DB: postgres
      KC_DB_URL: jdbc:postgresql://20.38.41.194/keycloakdb
      KC_DB_USERNAME: keycloakuser
      KC_DB_PASSWORD: keycloakpass
      KEYCLOAK_ADMIN: admin
      KEYCLOAK_ADMIN_PASSWORD: admin

    command:
      - start
      - --hostname-strict=false
      - --proxy=edge
      - --cache-config-file=jdbc.xml



docker-compose -f docker-compose-udp.yml up -d --scale keycloak-container=2
